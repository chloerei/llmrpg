<p style="color: green"><%= notice %></p>

<div class="breadcrumbs">
  <ul>
    <li>
      <a href="<%= conversations_path %>">
        Conversations
      </a>
    </li>
    <li>
      <%= @conversation.name.presence || "Untitled" %>
    </li>
  </ul>
</div>

<div class="avatar-group -space-x-5">
  <%= render "shared/avatar", avatar: @conversation.persona.avatar, name: @conversation.persona.name %>
  <%= render "shared/avatar", avatar: @conversation.character.avatar, name: @conversation.character.name %>
</div>

<div id="messages" class="min-h-screen mt-4">
  <%= render partial: "conversations/messages/message", collection: @conversation.messages %>
</div>

<div class="sticky bottom-0">
  <div class="max-w-screen-lg mx-auto pb-4">
    <div class="card bg-base-300 p-4">
      <%= form_with model: Message.new, url: conversation_messages_path(@conversation) do |form| %>
        <%= form.text_area :content, class: "textarea w-full", placeholder: "Message" %>
        <div class="flex mt-4">
          <div class="grow">
          </div>
          <div class="ml-2">
            <button type="submit" class="btn btn-primary btn-circle">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18" />
              </svg>
            </button>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
